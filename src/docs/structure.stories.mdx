import { Meta, Preview, Source } from '@storybook/addon-docs/blocks';
import dedent from 'ts-dedent';

<Meta title="Style Guide/Structure" />

# Structure

The page follows a semantic structure using HTML5 tags. *Note*: code is abbreviated for simplicity (e.g., no end/closing tags).

<Source language='html' code={dedent`
  <head>
    <title>
  <body>
    <div id="app">
      <a href="#main" class="skip-link">Skip to main content</a>
      <header class="dlp-title">
      <nav class="dlp-nav">
      <main id="main" class="dlp-main">
        <article id="agent">
        <article id="co-agent">
        <article id="team">
        <article id="company">
        <article id="global-reach">
        <article id="technology">
        <article id="marketing">
        <article id="selling">
        <article id="partners">
        <article id="community">
      <footer class="dlp-footer">
      <div class="dlp-modal">
`} />

## Page Title

*Disambiguation*: This refers to the `title` tag of the HTML document, *not* the Title animation at the top of the page.

Page titles should be descriptive. Follow this template:

<Source language='html' code={dedent`
  <title>[Firstname Lastname] - [City, State Abbreviation], Luxury Real Estate Agent - [Company Name]<title>
`} />

## Skip Link

Skip links are a recommended accessibility best practice. They are invisible until focus is brought to them. (Tab to the skip link to see it.)

<Preview>
<div className="relative overflow-y-scroll border border-primary-900 text-base">
  <a href="#main" className="skip-link">Skip to main content</a>
  <div id="main" className="pt-40">Main content is here</div>
</div>
</Preview>

Define classes in **src/assets/page.styles.scss**.

<Source language='html' code={dedent`
  /* Skip link */
  .skip-link {
    @apply sr-only;              /* hide the element */
    @apply bg-white;             /* background-color: theme('colors.white'); */
    @apply border-system-focus;  /* border: 1px solid theme('colors.system.focus'); */
    @apply text-xl;              /* font-size: 24px; */
    @apply p-5;                  /* padding: 20px; */
    &:focus {
      @apply not-sr-only;        /* show the element */
      @apply bg-white;           /* background-color: theme('colors.white'); */
      @apply border-system-focus;  /* border: 1px solid theme('colors.system.focus'); */
      @apply block;              /* display: block; */
      @apply text-xl;            /* font-size: 24px; */
      @apply py-3;               /* padding-top/bottom: 12px; */
      @apply px-5;               /* padding-left/right: 20px; */
      @apply absolute;           /* position: absolute; */
      top: 8px;
      left: 8px;
    }
  }
`} />

## Navigation

See [Navigation](/?path=/story/pattern-library-containers-navigation--page).

## Title

See [Title](/?path=/story/pattern-library-containers-title--page).

## Content

* Page content is broken into sections. Each section is coded as `article`. See [Section](/?path=/story/pattern-library-containers-section--page).
* The Contact section includes legal disclaimers. It is coded as `footer`. See [Footer](/?path=/story/pattern-library-containers-footer--page).
* Some sections have an intro "slide" (e.g., Company, Technology, Marketing); others do not (e.g., Co-Agent, Team, Contact). Each intro is coded as a `header` for that `article`.
* Sections can have sub-sections. Each sub-section is coded as `section` (e.g., the Agent section has sub-sections: agent bio, testimonials, recent sales, stats, contact).
* The content area (i.e., `.section-content`) has a max-width of 1440px and will be centered on screen.
* Content will align to a column grid.

## Grid

Grids vary by screen size.

* **Mobile** -- screens below 768px wide will use a **4-col** grid.
* **Tablet** -- screen between 768 and 1280px wide will use a **12-col** grid.
* **Desktop** -- screens at or above 1280px wide will use a **16-col** grid.

## Example: Selling

Example code for the Selling section. Note: code is abbreviated for simplicity (e.g., no end/closing tags).

<Source language='html' code={dedent`
  <!-- Selling section -->
  <article id="selling">
    <!-- section TITLE, aka. “intro slide” -->
    <header>  
    <!-- section CONTENT: adds left and right borders, applies consistent padding -->
    <div className="section-content"> 
      <!-- SUB-SECTION -->
      <section id="pricing">
        <!-- content GRID: sets max-width and provides a grid that content will align to -->
        <div className="content-grid">
          <!-- COLUMNS of content: classes are used to specify order, column span, and alignment -->
          <div className="order-1 md:order-2 col-span-4 md:col-span-6 md:col-start-7 lg:col-span-7 lg:col-start-9">
          <div className="order-2 md:order-1 col-span-4 md:col-span-6 md:col-start-1 lg:col-span-6 lg:col-start-2">
      <!-- SUB-SECTION -->
      <section id="staging">
        <!-- content GRID: sets max-width and provides a grid that content will align to -->
        <div className="content-grid">
          <!-- COLUMNS of content: classes are used to specify order, column span, and alignment -->
          <div className="col-span-4 md:col-span-6 md:col-start-7 lg:col-span-7 lg:col-start-9">
          <div className="col-span-4 md:col-span-6 md:col-start-1 lg:col-span-6 lg:col-start-2">
`} />

<img src="images/styleguide/selling.jpg" alt="Comps for Selling section" className="w-full" />

Define the `container` max-width and add support for a 16-column `grid` in **tailwind.config.js**.

<Source language='js' code={dedent`
  container: {
    xl: '1440px',
    center: true
  },
  extend: {
    gridTemplateColumns: {
      '16': 'repeat(16, minmax(0, 1fr))',
    },
    gridColumnStart: {
      '13': '13',
      '14': '14',
      '15': '15',
      '16': '16',
      '17': '17',
    }
  }
`} />

## Layers

Content will stack along the `z-index` in the following order. <span class="highlight">Need to update this.</span>

<table>
  <thead>
    <tr>
      <th className="w-1/5">z-index</th>
      <th className="w-1/5">Item</th>
      <th className="w-3/5">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td><code>#grids</code></td>
      <td>Used to check alignment during development <em>only</em>.<br /><u>Remove from production/public code</u>.</td>
    </tr>
    <tr>
      <td>2</td>
      <td><code>main.dlp-main</code></td>
      <td>Main content area.</td>
    </tr>
    <tr>
      <td>30</td>
      <td><code>nav.dlp-nav</code></td>
      <td>Navigation, stuck to the bottom of the screen.</td>
    </tr>
    <tr>
      <td>?</td>
      <td><code>header.dlp-title</code></td>
      <td>Title: animated intro to the page.</td>
    </tr>
    <tr>
      <td>?</td>
      <td><code>a.skip-link</code></td>
      <td>Skip link.</td>
    </tr>
    <tr>
      <td>9998</td>
      <td><code>div.dlp-modal</code></td>
      <td>Modals.</td>
    </tr>
  </tbody>
</table>

## Accessibility considerations

Relevant [WCAG 2.1 guidelines](https://www.w3.org/WAI/WCAG21/quickref/):

* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text. [1.3.1 Info and Relationships (Level A)](https://www.w3.org/WAI/WCAG21/quickref/#info-and-relationships)
* When the sequence in which content is presented affects its meaning, a correct reading sequence can be programmatically determined. [1.3.2 Meaningful Sequence (Level A)](https://www.w3.org/WAI/WCAG21/quickref/#meaningful-sequence)
* In content implemented using markup languages, the purpose of User Interface Components, icons, and regions can be programmatically determined. [1.3.6 Identify Purpose (Level AAA)]()
* A mechanism is available to bypass blocks of content that are repeated on multiple Web pages. [2.4.1 Bypass Blocks (Level A)](https://www.w3.org/WAI/WCAG21/quickref/#bypass-blocks)
* Web pages have titles that describe topic or purpose. [2.4.2 Page Titled (Level A)](https://www.w3.org/WAI/WCAG21/quickref/#page-titled)
* If a Web page can be navigated sequentially and the navigation sequences affect meaning or operation, focusable components receive focus in an order that preserves meaning and operability. [2.4.3 Focus Order (Level A)](https://www.w3.org/WAI/WCAG21/quickref/#focus-order)
* Section headings are used to organize the content. [2.4.10 Section Headings (Level AAA)](https://www.w3.org/WAI/WCAG21/quickref/#section-headings)

## Components

* [Navigation](/?path=/story/pattern-library-components-navigation--page)
* [Title](/?path=/story/pattern-library-components-title--page)
* [Section](/?path=/story/pattern-library-components-section--page)
* [Footer](/?path=/story/pattern-library-components-footer--page)
* [Modal](/?path=/story/pattern-library-components-modal--page)